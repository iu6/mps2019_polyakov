ПРИМЕР ПОКАЗЫВАЕТ РАБОТУ ТАЙМЕРА В РЕЖИМЕ ШИМ

Настраиваем таймер TIM1 
для генерации 5 сигналов ШИМ с 3 различными рабочими циклами.

Значение регистра TIM1 CCR1 равно 0x7FF, поэтому канал 1 TIM1 и канал 1N TIM1 генерируют сигнал ШИМ с частотой, равной 1,95 кГц, и рабочим циклом, равным: 
рабочий цикл TIM1 канала 1 = TIM1_CCR1 / (TIM1_Period + 1) = 50%

Значение регистра TIM1 CCR3 равно 0x1FF, поэтому канал 3 TIM1 генерирует сигнал ШИМ с частотой, равной 1,95 кГц, и рабочим циклом, равным: 
рабочий цикл TIM1 канала 1 = TIM1_CCR3 / (TIM1_Period + 1) = 12.5%

Период 8с.
Работу таймера отражают светодиоды 
 

